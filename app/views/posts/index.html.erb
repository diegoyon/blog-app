<div class="author-show">
  <div class="author-data">
    <img src='https://picsum.photos/200' />
    <div>
      <h2><%= @author.name %></h2>
      <p>Number of posts: <%= @author.posts.length %></p>
    </div>
  </div>
  <%= notice %>
  <div class="author-posts">
    <% @author.posts.each do |post| %>
      <%= link_to author_post_path(@author, post) do %>
        <div class="post-card">
          <p><%= post.title %></p>
          <p><%= post.text %></p>
          <p>Comments: <%= post.comments.length %></p>
          <p>Likes: <%= post.likes.length %></p>
        </div>
      <% end %>

      <%= form_with model: @like, url: author_post_likes_path(@author, post), method: :post do |form| %>
        <%= form.submit "Like" %>
      <% end %>

    <% end %>
  </div>

  <h2>Add a post:</h2>
  <%= form_with model: [ @author, @author.posts.build ] do |form| %>
    <p>
      <%= form.label :title %><br>
      <%= form.text_field :title %>
    </p>
    <p>
      <%= form.label :text %><br>
      <%= form.text_area :text %>
    </p>
    <p>
      <%= form.submit %>
    </p>
  <% end %>

</div>
